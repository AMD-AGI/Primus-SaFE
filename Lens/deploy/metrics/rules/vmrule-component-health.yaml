apiVersion: operator.victoriametrics.com/v1beta1
kind: VMRule
metadata:
  name: primus-lens-component-health-alerts
  namespace: primus-lens
  labels:
    app: primus-lens
    component: alerts
    category: component
spec:
  groups:
    - name: component_health_alerts
      interval: 30s
      rules:
        - alert: ComponentUnhealthy
          expr: primus_component_healthy == 0
          for: 2m
          labels:
            severity: warning
            category: component
          annotations:
            summary: "Component {{ $labels.app_name }} is unhealthy"
            description: >-
              cluster={{ $labels.cluster }}
              platform={{ $labels.platform }}
              app_name={{ $labels.app_name }}
              namespace={{ $labels.namespace }}
              kind={{ $labels.kind }}
              has been unhealthy for 2m
