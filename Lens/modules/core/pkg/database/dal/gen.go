// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.
// Code generated by gorm.io/gen. DO NOT EDIT.

package dal

import (
	"context"
	"database/sql"

	"gorm.io/gorm"

	"gorm.io/gen"

	"gorm.io/plugin/dbresolver"
)

func Use(db *gorm.DB, opts ...gen.DOOption) *Query {
	return &Query{
		db:                        db,
		AiWorkloadMetadata:        newAiWorkloadMetadata(db, opts...),
		AlertCorrelations:         newAlertCorrelations(db, opts...),
		AlertEvents:               newAlertEvents(db, opts...),
		AlertNotifications:        newAlertNotifications(db, opts...),
		AlertRuleAdviceStatistics: newAlertRuleAdviceStatistics(db, opts...),
		AlertRuleAdvices:          newAlertRuleAdvices(db, opts...),
		AlertRules:                newAlertRules(db, opts...),
		AlertSilences:             newAlertSilences(db, opts...),
		AlertStatistics:           newAlertStatistics(db, opts...),
		ClusterGpuHourlyStats:     newClusterGpuHourlyStats(db, opts...),
		ClusterOverviewCache:      newClusterOverviewCache(db, opts...),
		Fault:                     newFault(db, opts...),
		GenericCache:              newGenericCache(db, opts...),
		GpuAllocationSnapshots:    newGpuAllocationSnapshots(db, opts...),
		GpuDevice:                 newGpuDevice(db, opts...),
		GpuPods:                   newGpuPods(db, opts...),
		GpuPodsEvent:              newGpuPodsEvent(db, opts...),
		GpuWorkload:               newGpuWorkload(db, opts...),
		GpuWorkloadSnapshot:       newGpuWorkloadSnapshot(db, opts...),
		JobExecutionHistory:       newJobExecutionHistory(db, opts...),
		LabelGpuHourlyStats:       newLabelGpuHourlyStats(db, opts...),
		LogAlertRuleStatistics:    newLogAlertRuleStatistics(db, opts...),
		LogAlertRuleTemplates:     newLogAlertRuleTemplates(db, opts...),
		LogAlertRuleVersions:      newLogAlertRuleVersions(db, opts...),
		LogAlertRules:             newLogAlertRules(db, opts...),
		MetricAlertRules:          newMetricAlertRules(db, opts...),
		NamespaceGpuHourlyStats:   newNamespaceGpuHourlyStats(db, opts...),
		NamespaceInfo:             newNamespaceInfo(db, opts...),
		Node:                      newNode(db, opts...),
		NodeContainer:             newNodeContainer(db, opts...),
		NodeContainerDevices:      newNodeContainerDevices(db, opts...),
		NodeContainerEvent:        newNodeContainerEvent(db, opts...),
		NodeDeviceChangelog:       newNodeDeviceChangelog(db, opts...),
		PodResource:               newPodResource(db, opts...),
		PodSnapshot:               newPodSnapshot(db, opts...),
		RdmaDevice:                newRdmaDevice(db, opts...),
		SilencedAlerts:            newSilencedAlerts(db, opts...),
		Storage:                   newStorage(db, opts...),
		SystemConfig:              newSystemConfig(db, opts...),
		SystemConfigHistory:       newSystemConfigHistory(db, opts...),
		TrainingPerformance:       newTrainingPerformance(db, opts...),
		WorkloadEvent:             newWorkloadEvent(db, opts...),
		WorkloadGpuHourlyStats:    newWorkloadGpuHourlyStats(db, opts...),
		WorkloadPodReference:      newWorkloadPodReference(db, opts...),
		WorkloadResource:          newWorkloadResource(db, opts...),
	}
}

type Query struct {
	db *gorm.DB

	AiWorkloadMetadata        aiWorkloadMetadata
	AlertCorrelations         alertCorrelations
	AlertEvents               alertEvents
	AlertNotifications        alertNotifications
	AlertRuleAdviceStatistics alertRuleAdviceStatistics
	AlertRuleAdvices          alertRuleAdvices
	AlertRules                alertRules
	AlertSilences             alertSilences
	AlertStatistics           alertStatistics
	ClusterGpuHourlyStats     clusterGpuHourlyStats
	ClusterOverviewCache      clusterOverviewCache
	Fault                     fault
	GenericCache              genericCache
	GpuAllocationSnapshots    gpuAllocationSnapshots
	GpuDevice                 gpuDevice
	GpuPods                   gpuPods
	GpuPodsEvent              gpuPodsEvent
	GpuWorkload               gpuWorkload
	GpuWorkloadSnapshot       gpuWorkloadSnapshot
	JobExecutionHistory       jobExecutionHistory
	LabelGpuHourlyStats       labelGpuHourlyStats
	LogAlertRuleStatistics    logAlertRuleStatistics
	LogAlertRuleTemplates     logAlertRuleTemplates
	LogAlertRuleVersions      logAlertRuleVersions
	LogAlertRules             logAlertRules
	MetricAlertRules          metricAlertRules
	NamespaceGpuHourlyStats   namespaceGpuHourlyStats
	NamespaceInfo             namespaceInfo
	Node                      node
	NodeContainer             nodeContainer
	NodeContainerDevices      nodeContainerDevices
	NodeContainerEvent        nodeContainerEvent
	NodeDeviceChangelog       nodeDeviceChangelog
	PodResource               podResource
	PodSnapshot               podSnapshot
	RdmaDevice                rdmaDevice
	SilencedAlerts            silencedAlerts
	Storage                   storage
	SystemConfig              systemConfig
	SystemConfigHistory       systemConfigHistory
	TrainingPerformance       trainingPerformance
	WorkloadEvent             workloadEvent
	WorkloadGpuHourlyStats    workloadGpuHourlyStats
	WorkloadPodReference      workloadPodReference
	WorkloadResource          workloadResource
}

func (q *Query) Available() bool { return q.db != nil }

func (q *Query) clone(db *gorm.DB) *Query {
	return &Query{
		db:                        db,
		AiWorkloadMetadata:        q.AiWorkloadMetadata.clone(db),
		AlertCorrelations:         q.AlertCorrelations.clone(db),
		AlertEvents:               q.AlertEvents.clone(db),
		AlertNotifications:        q.AlertNotifications.clone(db),
		AlertRuleAdviceStatistics: q.AlertRuleAdviceStatistics.clone(db),
		AlertRuleAdvices:          q.AlertRuleAdvices.clone(db),
		AlertRules:                q.AlertRules.clone(db),
		AlertSilences:             q.AlertSilences.clone(db),
		AlertStatistics:           q.AlertStatistics.clone(db),
		ClusterGpuHourlyStats:     q.ClusterGpuHourlyStats.clone(db),
		ClusterOverviewCache:      q.ClusterOverviewCache.clone(db),
		Fault:                     q.Fault.clone(db),
		GenericCache:              q.GenericCache.clone(db),
		GpuAllocationSnapshots:    q.GpuAllocationSnapshots.clone(db),
		GpuDevice:                 q.GpuDevice.clone(db),
		GpuPods:                   q.GpuPods.clone(db),
		GpuPodsEvent:              q.GpuPodsEvent.clone(db),
		GpuWorkload:               q.GpuWorkload.clone(db),
		GpuWorkloadSnapshot:       q.GpuWorkloadSnapshot.clone(db),
		JobExecutionHistory:       q.JobExecutionHistory.clone(db),
		LabelGpuHourlyStats:       q.LabelGpuHourlyStats.clone(db),
		LogAlertRuleStatistics:    q.LogAlertRuleStatistics.clone(db),
		LogAlertRuleTemplates:     q.LogAlertRuleTemplates.clone(db),
		LogAlertRuleVersions:      q.LogAlertRuleVersions.clone(db),
		LogAlertRules:             q.LogAlertRules.clone(db),
		MetricAlertRules:          q.MetricAlertRules.clone(db),
		NamespaceGpuHourlyStats:   q.NamespaceGpuHourlyStats.clone(db),
		NamespaceInfo:             q.NamespaceInfo.clone(db),
		Node:                      q.Node.clone(db),
		NodeContainer:             q.NodeContainer.clone(db),
		NodeContainerDevices:      q.NodeContainerDevices.clone(db),
		NodeContainerEvent:        q.NodeContainerEvent.clone(db),
		NodeDeviceChangelog:       q.NodeDeviceChangelog.clone(db),
		PodResource:               q.PodResource.clone(db),
		PodSnapshot:               q.PodSnapshot.clone(db),
		RdmaDevice:                q.RdmaDevice.clone(db),
		SilencedAlerts:            q.SilencedAlerts.clone(db),
		Storage:                   q.Storage.clone(db),
		SystemConfig:              q.SystemConfig.clone(db),
		SystemConfigHistory:       q.SystemConfigHistory.clone(db),
		TrainingPerformance:       q.TrainingPerformance.clone(db),
		WorkloadEvent:             q.WorkloadEvent.clone(db),
		WorkloadGpuHourlyStats:    q.WorkloadGpuHourlyStats.clone(db),
		WorkloadPodReference:      q.WorkloadPodReference.clone(db),
		WorkloadResource:          q.WorkloadResource.clone(db),
	}
}

func (q *Query) ReadDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Read))
}

func (q *Query) WriteDB() *Query {
	return q.ReplaceDB(q.db.Clauses(dbresolver.Write))
}

func (q *Query) ReplaceDB(db *gorm.DB) *Query {
	return &Query{
		db:                        db,
		AiWorkloadMetadata:        q.AiWorkloadMetadata.replaceDB(db),
		AlertCorrelations:         q.AlertCorrelations.replaceDB(db),
		AlertEvents:               q.AlertEvents.replaceDB(db),
		AlertNotifications:        q.AlertNotifications.replaceDB(db),
		AlertRuleAdviceStatistics: q.AlertRuleAdviceStatistics.replaceDB(db),
		AlertRuleAdvices:          q.AlertRuleAdvices.replaceDB(db),
		AlertRules:                q.AlertRules.replaceDB(db),
		AlertSilences:             q.AlertSilences.replaceDB(db),
		AlertStatistics:           q.AlertStatistics.replaceDB(db),
		ClusterGpuHourlyStats:     q.ClusterGpuHourlyStats.replaceDB(db),
		ClusterOverviewCache:      q.ClusterOverviewCache.replaceDB(db),
		Fault:                     q.Fault.replaceDB(db),
		GenericCache:              q.GenericCache.replaceDB(db),
		GpuAllocationSnapshots:    q.GpuAllocationSnapshots.replaceDB(db),
		GpuDevice:                 q.GpuDevice.replaceDB(db),
		GpuPods:                   q.GpuPods.replaceDB(db),
		GpuPodsEvent:              q.GpuPodsEvent.replaceDB(db),
		GpuWorkload:               q.GpuWorkload.replaceDB(db),
		GpuWorkloadSnapshot:       q.GpuWorkloadSnapshot.replaceDB(db),
		JobExecutionHistory:       q.JobExecutionHistory.replaceDB(db),
		LabelGpuHourlyStats:       q.LabelGpuHourlyStats.replaceDB(db),
		LogAlertRuleStatistics:    q.LogAlertRuleStatistics.replaceDB(db),
		LogAlertRuleTemplates:     q.LogAlertRuleTemplates.replaceDB(db),
		LogAlertRuleVersions:      q.LogAlertRuleVersions.replaceDB(db),
		LogAlertRules:             q.LogAlertRules.replaceDB(db),
		MetricAlertRules:          q.MetricAlertRules.replaceDB(db),
		NamespaceGpuHourlyStats:   q.NamespaceGpuHourlyStats.replaceDB(db),
		NamespaceInfo:             q.NamespaceInfo.replaceDB(db),
		Node:                      q.Node.replaceDB(db),
		NodeContainer:             q.NodeContainer.replaceDB(db),
		NodeContainerDevices:      q.NodeContainerDevices.replaceDB(db),
		NodeContainerEvent:        q.NodeContainerEvent.replaceDB(db),
		NodeDeviceChangelog:       q.NodeDeviceChangelog.replaceDB(db),
		PodResource:               q.PodResource.replaceDB(db),
		PodSnapshot:               q.PodSnapshot.replaceDB(db),
		RdmaDevice:                q.RdmaDevice.replaceDB(db),
		SilencedAlerts:            q.SilencedAlerts.replaceDB(db),
		Storage:                   q.Storage.replaceDB(db),
		SystemConfig:              q.SystemConfig.replaceDB(db),
		SystemConfigHistory:       q.SystemConfigHistory.replaceDB(db),
		TrainingPerformance:       q.TrainingPerformance.replaceDB(db),
		WorkloadEvent:             q.WorkloadEvent.replaceDB(db),
		WorkloadGpuHourlyStats:    q.WorkloadGpuHourlyStats.replaceDB(db),
		WorkloadPodReference:      q.WorkloadPodReference.replaceDB(db),
		WorkloadResource:          q.WorkloadResource.replaceDB(db),
	}
}

type queryCtx struct {
	AiWorkloadMetadata        *aiWorkloadMetadataDo
	AlertCorrelations         *alertCorrelationsDo
	AlertEvents               *alertEventsDo
	AlertNotifications        *alertNotificationsDo
	AlertRuleAdviceStatistics *alertRuleAdviceStatisticsDo
	AlertRuleAdvices          *alertRuleAdvicesDo
	AlertRules                *alertRulesDo
	AlertSilences             *alertSilencesDo
	AlertStatistics           *alertStatisticsDo
	ClusterGpuHourlyStats     *clusterGpuHourlyStatsDo
	ClusterOverviewCache      *clusterOverviewCacheDo
	Fault                     *faultDo
	GenericCache              *genericCacheDo
	GpuAllocationSnapshots    *gpuAllocationSnapshotsDo
	GpuDevice                 *gpuDeviceDo
	GpuPods                   *gpuPodsDo
	GpuPodsEvent              *gpuPodsEventDo
	GpuWorkload               *gpuWorkloadDo
	GpuWorkloadSnapshot       *gpuWorkloadSnapshotDo
	JobExecutionHistory       *jobExecutionHistoryDo
	LabelGpuHourlyStats       *labelGpuHourlyStatsDo
	LogAlertRuleStatistics    *logAlertRuleStatisticsDo
	LogAlertRuleTemplates     *logAlertRuleTemplatesDo
	LogAlertRuleVersions      *logAlertRuleVersionsDo
	LogAlertRules             *logAlertRulesDo
	MetricAlertRules          *metricAlertRulesDo
	NamespaceGpuHourlyStats   *namespaceGpuHourlyStatsDo
	NamespaceInfo             *namespaceInfoDo
	Node                      *nodeDo
	NodeContainer             *nodeContainerDo
	NodeContainerDevices      *nodeContainerDevicesDo
	NodeContainerEvent        *nodeContainerEventDo
	NodeDeviceChangelog       *nodeDeviceChangelogDo
	PodResource               *podResourceDo
	PodSnapshot               *podSnapshotDo
	RdmaDevice                *rdmaDeviceDo
	SilencedAlerts            *silencedAlertsDo
	Storage                   *storageDo
	SystemConfig              *systemConfigDo
	SystemConfigHistory       *systemConfigHistoryDo
	TrainingPerformance       *trainingPerformanceDo
	WorkloadEvent             *workloadEventDo
	WorkloadGpuHourlyStats    *workloadGpuHourlyStatsDo
	WorkloadPodReference      *workloadPodReferenceDo
	WorkloadResource          *workloadResourceDo
}

func (q *Query) WithContext(ctx context.Context) *queryCtx {
	return &queryCtx{
		AiWorkloadMetadata:        q.AiWorkloadMetadata.WithContext(ctx),
		AlertCorrelations:         q.AlertCorrelations.WithContext(ctx),
		AlertEvents:               q.AlertEvents.WithContext(ctx),
		AlertNotifications:        q.AlertNotifications.WithContext(ctx),
		AlertRuleAdviceStatistics: q.AlertRuleAdviceStatistics.WithContext(ctx),
		AlertRuleAdvices:          q.AlertRuleAdvices.WithContext(ctx),
		AlertRules:                q.AlertRules.WithContext(ctx),
		AlertSilences:             q.AlertSilences.WithContext(ctx),
		AlertStatistics:           q.AlertStatistics.WithContext(ctx),
		ClusterGpuHourlyStats:     q.ClusterGpuHourlyStats.WithContext(ctx),
		ClusterOverviewCache:      q.ClusterOverviewCache.WithContext(ctx),
		Fault:                     q.Fault.WithContext(ctx),
		GenericCache:              q.GenericCache.WithContext(ctx),
		GpuAllocationSnapshots:    q.GpuAllocationSnapshots.WithContext(ctx),
		GpuDevice:                 q.GpuDevice.WithContext(ctx),
		GpuPods:                   q.GpuPods.WithContext(ctx),
		GpuPodsEvent:              q.GpuPodsEvent.WithContext(ctx),
		GpuWorkload:               q.GpuWorkload.WithContext(ctx),
		GpuWorkloadSnapshot:       q.GpuWorkloadSnapshot.WithContext(ctx),
		JobExecutionHistory:       q.JobExecutionHistory.WithContext(ctx),
		LabelGpuHourlyStats:       q.LabelGpuHourlyStats.WithContext(ctx),
		LogAlertRuleStatistics:    q.LogAlertRuleStatistics.WithContext(ctx),
		LogAlertRuleTemplates:     q.LogAlertRuleTemplates.WithContext(ctx),
		LogAlertRuleVersions:      q.LogAlertRuleVersions.WithContext(ctx),
		LogAlertRules:             q.LogAlertRules.WithContext(ctx),
		MetricAlertRules:          q.MetricAlertRules.WithContext(ctx),
		NamespaceGpuHourlyStats:   q.NamespaceGpuHourlyStats.WithContext(ctx),
		NamespaceInfo:             q.NamespaceInfo.WithContext(ctx),
		Node:                      q.Node.WithContext(ctx),
		NodeContainer:             q.NodeContainer.WithContext(ctx),
		NodeContainerDevices:      q.NodeContainerDevices.WithContext(ctx),
		NodeContainerEvent:        q.NodeContainerEvent.WithContext(ctx),
		NodeDeviceChangelog:       q.NodeDeviceChangelog.WithContext(ctx),
		PodResource:               q.PodResource.WithContext(ctx),
		PodSnapshot:               q.PodSnapshot.WithContext(ctx),
		RdmaDevice:                q.RdmaDevice.WithContext(ctx),
		SilencedAlerts:            q.SilencedAlerts.WithContext(ctx),
		Storage:                   q.Storage.WithContext(ctx),
		SystemConfig:              q.SystemConfig.WithContext(ctx),
		SystemConfigHistory:       q.SystemConfigHistory.WithContext(ctx),
		TrainingPerformance:       q.TrainingPerformance.WithContext(ctx),
		WorkloadEvent:             q.WorkloadEvent.WithContext(ctx),
		WorkloadGpuHourlyStats:    q.WorkloadGpuHourlyStats.WithContext(ctx),
		WorkloadPodReference:      q.WorkloadPodReference.WithContext(ctx),
		WorkloadResource:          q.WorkloadResource.WithContext(ctx),
	}
}

func (q *Query) Transaction(fc func(tx *Query) error, opts ...*sql.TxOptions) error {
	return q.db.Transaction(func(tx *gorm.DB) error { return fc(q.clone(tx)) }, opts...)
}

func (q *Query) Begin(opts ...*sql.TxOptions) *QueryTx {
	tx := q.db.Begin(opts...)
	return &QueryTx{Query: q.clone(tx), Error: tx.Error}
}

type QueryTx struct {
	*Query
	Error error
}

func (q *QueryTx) Commit() error {
	return q.db.Commit().Error
}

func (q *QueryTx) Rollback() error {
	return q.db.Rollback().Error
}

func (q *QueryTx) SavePoint(name string) error {
	return q.db.SavePoint(name).Error
}

func (q *QueryTx) RollbackTo(name string) error {
	return q.db.RollbackTo(name).Error
}
