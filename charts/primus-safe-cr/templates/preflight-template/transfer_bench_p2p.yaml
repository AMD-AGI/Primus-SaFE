apiVersion: amd.com/v1
kind: AddonTemplate
metadata:
  name: transfer-bench-p2p
  labels:
    primus-safe.display.name: "transfer-bench-p2p"
    app.kubernetes.io/managed-by: Helm
  annotations:
    meta.helm.sh/release-name: {{ .Release.Name }}
    meta.helm.sh/release-namespace: {{ .Release.Namespace }}
spec:
  type: validation
  category: System
  gpuChip: amd
  gpuProduct: MI300X
  description: Use the command "TransferBench p2p" to measure bandwidth of unidirectional and bidirectional copy between CPU and GPU.
  extensions:
    action: UkVQT19VUkw9Imh0dHBzOi8vZ2l0aHViLmNvbS9ST0NtL1RyYW5zZmVyQmVuY2guZ2l0IgpESVJfTkFNRT0iVHJhbnNmZXJCZW5jaCIKTE9HX0ZJTEU9Ii90bXAvdHJhbnNmZXJfcDJwLmxvZyIKaWYgWyAhIC1kICIkRElSX05BTUUiIF07IHRoZW4KICBnaXQgY2xvbmUgIiRSRVBPX1VSTCIKICBpZiBbICQ/IC1uZSAwIF07IHRoZW4KICAgIGVjaG8gIltFUlJPUl06IGZhaWxlZCB0byBjbG9uZSAkUkVQT19VUkwiCiAgICBleGl0IDEKICBmaQpmaQpjZCAiJERJUl9OQU1FIiB8fCB7IGVjaG8gIltFUlJPUl06IHVuYWJsZSB0byBhY2Nlc3MgJERJUl9OQU1FIjsgZXhpdCAxOyB9CkNDPWhpcGNjIG1ha2UgPiAvZGV2L251bGwgMj4mMQppZiBbICQ/IC1uZSAwIF07IHRoZW4KICBlY2hvICJbRVJST1JdOiBmYWlsZWQgdG8gbWFrZSIKICBleGl0IDEKZmkKCi4vVHJhbnNmZXJCZW5jaCBwMnAgPiRMT0dfRklMRSAyPiYxCkVYSVRfQ09ERT0kPwppZiBbICRFWElUX0NPREUgLW5lIDAgXTsgdGhlbgogIGVjaG8gIltFUlJPUl06IFRyYW5zZmVyQmVuY2ggZmFpbGVkIHdpdGggZXhpdCBjb2RlOiAkRVhJVF9DT0RFIgogIGVjaG8gIiRPVVRQVVQiCiAgcm0gLWYgJExPR19GSUxFCiAgZXhpdCAxCmZpCgptYXBmaWxlIC10IGxpbmVzIDwgPChncmVwICdeQXZlcmFnZXMnICIkTE9HX0ZJTEUiIHwgaGVhZCAtbiAyKQpybSAtZiAiJExPR19GSUxFIgppZiAoKCAkeyNsaW5lc1tAXX0gPCAyICkpOyB0aGVuCiAgZWNobyAiW0VSUk9SXSBFeHBlY3RlZCAyIGxpbmVzIHN0YXJ0aW5nIHdpdGggJ0F2ZXJhZ2VzJywgYnV0IGdvdCBvbmx5ICR7I2xpbmVzW0BdfSIKICBleGl0IDEKZmkKCmxpbmUxPSR7bGluZXNbMF19Cm51bWJlcnMxPSgkKGVjaG8gJGxpbmUxIHwgYXdrICd7Zm9yKGk9NDtpPD1ORjtpKyspIHByaW50ZiAiJXMgIiwgJGl9JykpCmFsbF9hYm92ZV8zM185PXRydWUKZm9yIG51bSBpbiAiJHtudW1iZXJzMVtAXX0iOyBkbwogIGlmICgoICQoZWNobyAiJG51bSA8IDMzLjkiIHwgYmMgLWwpICkpOyB0aGVuCiAgICBhbGxfYWJvdmVfMzNfOT1mYWxzZQogICAgYnJlYWsKICBmaQpkb25lCgppZiBbICIkYWxsX2Fib3ZlXzMzXzkiID0gdHJ1ZSBdOyB0aGVuCiAgZWNobyAiW0lORk9dOiBBdmVyYWdlcyAoRHVyaW5nIFVuaURpcikgYXJlIGdyZWF0ZXIgdGhhbiAzMy45LiIKZWxzZQogIGVjaG8gIltFUlJPUl06ICRsaW5lMSwgc29tZSBhdmVyYWdlcyBhcmUgbGVzcyB0aGFuIDMzLjkuIgogIGV4aXQgMQpmaQoKbGluZTI9JHtsaW5lc1sxXX0KbnVtYmVyczI9KCQoZWNobyAkbGluZTIgfCBhd2sgJ3tmb3IoaT00O2k8PU5GO2krKykgcHJpbnRmICIlcyAiLCAkaX0nKSkKYWxsX2Fib3ZlXzQzXzk9dHJ1ZQpmb3IgbnVtIGluICIke251bWJlcnMyW0BdfSI7IGRvCiAgaWYgKCggJChlY2hvICIkbnVtIDwgNDMuOSIgfCBiYyAtbCkgKSk7IHRoZW4KICAgIGFsbF9hYm92ZV80M185PWZhbHNlCiAgICBicmVhawogIGZpCmRvbmUKCmlmIFsgIiRhbGxfYWJvdmVfNDNfOSIgPSB0cnVlIF07IHRoZW4KICBlY2hvICJbSU5GT106IEF2ZXJhZ2VzIChEdXJpbmcgIEJpRGlyKSBhcmUgZ3JlYXRlciB0aGFuIDQzLjkuIgplbHNlCiAgZWNobyAiW0VSUk9SXTogJGxpbmUyLCBzb21lIGF2ZXJhZ2VzIGFyZSBsZXNzIHRoYW4gNDMuOS4iCiAgZXhpdCAxCmZpCmVjaG8gIltTVUNDRVNTXTogdHJhbnNmZXIgYmVuY2ggcDJwIHBhc3NlZCIKZXhpdCAwCg==